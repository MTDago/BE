<!DOCTYPE html>
<html>
  <head>
    <title>BE</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
  <header>
  <div id=devise_notifications>
    <p class="notice"><%= notice %></p>
    <p class="alert"><%= alert %></p>
  </div>

  <nav class="navbar">
    <span class="open-menu">
      <a onclick="openSideMenu()">
        <svg width="30" height="30">
          <path d="M0,5 30,5" stroke="#fff" stroke-width="5"/>
          <path d="M0,14 30,14" stroke="#fff" stroke-width="5"/>
          <path d="M0,23 30,23" stroke="#fff" stroke-width="5"/>
        </svg>
      </a>
    </span>

    <ul class="navbar-nav">
      <li><a href="#">Home</a></li>
      <li><a href="#">Search</a></li>
      <li><a href="#">Saved</a></li>
      <li>
      <% if !Profile.where(user: current_user).empty? %>
        <%= link_to "My Profile", profile_path(current_user.id) %></li>
        <% else %>
        <%= link_to "My Profile", new_profile_path %>
      <% end %>  
    </ul>
  </nav>

  <div id="side-menu" class="side-nav">
    <a class="close-butn" onclick="closeSideMenu()">&times;</a>
      <a href="#">Home</a>
      <a href="#">Search</a>
      <a href="#">Saved</a>
      <a href="#">My Profile</a>
  </div>

  <div id="main">
  <h1> 
  <% if user_signed_in? %>
    <% if !Profile.where(user: current_user).empty? %>
      <%= Profile.where(user: current_user)[0].user_name %>
    <% end %>
    <%= current_user.email %>
  <% end %>
  </h1>
    <div id="sign-uio">
    <% if user_signed_in? %>
    <%= link_to 'Sign out', destroy_user_session_path, method: :delete %>
    <% else %>
    <%= link_to 'Sign up', new_user_registration_path %>
    <%= link_to 'Sign in', new_user_session_path %>
    <% end %>
    </div>
  </div>

  <script>
    function openSideMenu() {
      document.getElementById('side-menu').style.width = '250px';
      document.getElementById('main').style.marginLeft = '250px';
    }
  </script>
  
  <script>
    function closeSideMenu() {
      document.getElementById('side-menu').style.width = '0';
      document.getElementById('main').style.marginLeft = '0';
    }
  </script>
  </header>
    <%= yield %>
    <footer>
        <p>BE, Copyright &copy; 2019</p>
        <p>Michael Twitt & Matthew Leacy</p>
    </footer>
  </body>
</html>
